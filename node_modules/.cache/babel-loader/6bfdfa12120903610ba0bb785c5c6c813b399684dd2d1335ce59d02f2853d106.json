{"ast":null,"code":"// $_SESSION['s3']['albumBucketName'] = \"mogulvideo\";\n// $_SESSION['s3']['bucketRegion'] = \"us-west-2\";\n// $_SESSION['s3']['IdentityPoolId'] = \"us-west-2:78aae9fb-21b1-428e-8b4e-86e5b21de9b2\";\n\nimport { Amplify, Auth, Storage } from \"aws-amplify\";\nimport { v4 } from \"uuid\";\nimport { uid } from \"uid\";\nexport const upload = (file, objJson, images) => {\n  Amplify.configure({\n    Auth: {\n      identityPoolId: \"us-west-2:78aae9fb-21b1-428e-8b4e-86e5b21de9b2\",\n      //REQUIRED - Amazon Cognito Identity Pool ID\n      region: \"us-west-2\" // REQUIRED - Amazon Cognito Region\n    },\n\n    Storage: {\n      AWSS3: {\n        bucket: \"mogulvideo\",\n        //REQUIRED -  Amazon S3 bucket name\n        region: \"us-west-2\" //OPTIONAL -  Amazon service region\n      }\n    }\n  });\n\n  const folderUid = v4();\n  const shapesUid = uid(16);\n\n  //\n  // Storage.put(`S3/mogulvideo/${folderUid}/${file.name}`, file, {\n  //   progressCallback(progress) {\n  //     console.log(`Uploaded: ${progress.loaded}/${progress.total}`);\n  //   },\n  // })\n  //   .then((res) => console.log(res))\n  //   .catch((err) => console.log(err));\n  //\n  // Storage.put(`S3/mogulvideo/${folderUid}/shapes-${shapesUid}-json`, objJson, {\n  //   progressCallback(progress) {\n  //     console.log(`Uploaded: ${progress.loaded}/${progress.total}`);\n  //   },\n  // })\n  //   .then((res) => console.log(res))\n  //   .catch((err) => console.log(err));\n  //\n  let imgNumber = 1; // Initialize the image number\n  let sum = 0; // get the sum of uplaoded iamges\n  // Loop through the images and upload them with different numbers\n  for (const img of images) {\n    const key = `S3/mogulvideo/${folderUid}/images/img-${imgNumber}`;\n    // Upload the image with the current key\n    // Storage.put(key, img, {\n    //   progressCallback(progress) {\n    //     console.log(`Uploaded: ${progress.loaded}/${progress.total}`);\n    //   },\n    // });\n    imgNumber++; // Increment the image number for the next image\n  }\n\n  return {\n    videoFileName: file.name,\n    shapesUid,\n    folderUid,\n    totalImages: \"\"\n  };\n};\nexport const download = async fileKey => {\n  // Configure Amplify (you can put this configuration in a common place)\n  Amplify.configure({\n    Auth: {\n      identityPoolId: \"us-west-2:78aae9fb-21b1-428e-8b4e-86e5b21de9b2\",\n      // REQUIRED - Amazon Cognito Identity Pool ID\n      region: \"us-west-2\" // REQUIRED - Amazon Cognito Region\n    },\n\n    Storage: {\n      AWSS3: {\n        bucket: \"mogulvideo\",\n        // REQUIRED - Amazon S3 bucket name\n        region: \"us-west-2\" // OPTIONAL - Amazon service region\n      }\n    }\n  });\n\n  const response = await Storage.get(fileKey);\n  return response;\n};","map":{"version":3,"names":["Amplify","Auth","Storage","v4","uid","upload","file","objJson","images","configure","identityPoolId","region","AWSS3","bucket","folderUid","shapesUid","imgNumber","sum","img","key","videoFileName","name","totalImages","download","fileKey","response","get"],"sources":["D:/Work/00-Mogul/konva v2/src/utils/index.js"],"sourcesContent":["// $_SESSION['s3']['albumBucketName'] = \"mogulvideo\";\r\n// $_SESSION['s3']['bucketRegion'] = \"us-west-2\";\r\n// $_SESSION['s3']['IdentityPoolId'] = \"us-west-2:78aae9fb-21b1-428e-8b4e-86e5b21de9b2\";\r\n\r\nimport { Amplify, Auth, Storage } from \"aws-amplify\";\r\nimport { v4 } from \"uuid\";\r\nimport { uid } from \"uid\";\r\n\r\nexport const upload = (file, objJson, images) => {\r\n  Amplify.configure({\r\n    Auth: {\r\n      identityPoolId: \"us-west-2:78aae9fb-21b1-428e-8b4e-86e5b21de9b2\", //REQUIRED - Amazon Cognito Identity Pool ID\r\n      region: \"us-west-2\", // REQUIRED - Amazon Cognito Region\r\n    },\r\n    Storage: {\r\n      AWSS3: {\r\n        bucket: \"mogulvideo\", //REQUIRED -  Amazon S3 bucket name\r\n        region: \"us-west-2\", //OPTIONAL -  Amazon service region\r\n      },\r\n    },\r\n  });\r\n\r\n  const folderUid = v4();\r\n  const shapesUid = uid(16);\r\n\r\n  //\r\n  // Storage.put(`S3/mogulvideo/${folderUid}/${file.name}`, file, {\r\n  //   progressCallback(progress) {\r\n  //     console.log(`Uploaded: ${progress.loaded}/${progress.total}`);\r\n  //   },\r\n  // })\r\n  //   .then((res) => console.log(res))\r\n  //   .catch((err) => console.log(err));\r\n  //\r\n  // Storage.put(`S3/mogulvideo/${folderUid}/shapes-${shapesUid}-json`, objJson, {\r\n  //   progressCallback(progress) {\r\n  //     console.log(`Uploaded: ${progress.loaded}/${progress.total}`);\r\n  //   },\r\n  // })\r\n  //   .then((res) => console.log(res))\r\n  //   .catch((err) => console.log(err));\r\n  //\r\n  let imgNumber = 1; // Initialize the image number\r\n  let sum = 0; // get the sum of uplaoded iamges\r\n  // Loop through the images and upload them with different numbers\r\n  for (const img of images) {\r\n    const key = `S3/mogulvideo/${folderUid}/images/img-${imgNumber}`;\r\n    // Upload the image with the current key\r\n    // Storage.put(key, img, {\r\n    //   progressCallback(progress) {\r\n    //     console.log(`Uploaded: ${progress.loaded}/${progress.total}`);\r\n    //   },\r\n    // });\r\n    imgNumber++; // Increment the image number for the next image\r\n  }\r\n\r\n  return { videoFileName: file.name, shapesUid, folderUid, totalImages: \"\" };\r\n};\r\n\r\nexport const download = async (fileKey) => {\r\n  // Configure Amplify (you can put this configuration in a common place)\r\n  Amplify.configure({\r\n    Auth: {\r\n      identityPoolId: \"us-west-2:78aae9fb-21b1-428e-8b4e-86e5b21de9b2\", // REQUIRED - Amazon Cognito Identity Pool ID\r\n      region: \"us-west-2\", // REQUIRED - Amazon Cognito Region\r\n    },\r\n    Storage: {\r\n      AWSS3: {\r\n        bucket: \"mogulvideo\", // REQUIRED - Amazon S3 bucket name\r\n        region: \"us-west-2\", // OPTIONAL - Amazon service region\r\n      },\r\n    },\r\n  });\r\n\r\n  const response = await Storage.get(fileKey);\r\n\r\n  return response;\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;;AAEA,SAASA,OAAO,EAAEC,IAAI,EAAEC,OAAO,QAAQ,aAAa;AACpD,SAASC,EAAE,QAAQ,MAAM;AACzB,SAASC,GAAG,QAAQ,KAAK;AAEzB,OAAO,MAAMC,MAAM,GAAGA,CAACC,IAAI,EAAEC,OAAO,EAAEC,MAAM,KAAK;EAC/CR,OAAO,CAACS,SAAS,CAAC;IAChBR,IAAI,EAAE;MACJS,cAAc,EAAE,gDAAgD;MAAE;MAClEC,MAAM,EAAE,WAAW,CAAE;IACvB,CAAC;;IACDT,OAAO,EAAE;MACPU,KAAK,EAAE;QACLC,MAAM,EAAE,YAAY;QAAE;QACtBF,MAAM,EAAE,WAAW,CAAE;MACvB;IACF;EACF,CAAC,CAAC;;EAEF,MAAMG,SAAS,GAAGX,EAAE,CAAC,CAAC;EACtB,MAAMY,SAAS,GAAGX,GAAG,CAAC,EAAE,CAAC;;EAEzB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAIY,SAAS,GAAG,CAAC,CAAC,CAAC;EACnB,IAAIC,GAAG,GAAG,CAAC,CAAC,CAAC;EACb;EACA,KAAK,MAAMC,GAAG,IAAIV,MAAM,EAAE;IACxB,MAAMW,GAAG,GAAI,iBAAgBL,SAAU,eAAcE,SAAU,EAAC;IAChE;IACA;IACA;IACA;IACA;IACA;IACAA,SAAS,EAAE,CAAC,CAAC;EACf;;EAEA,OAAO;IAAEI,aAAa,EAAEd,IAAI,CAACe,IAAI;IAAEN,SAAS;IAAED,SAAS;IAAEQ,WAAW,EAAE;EAAG,CAAC;AAC5E,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAG,MAAOC,OAAO,IAAK;EACzC;EACAxB,OAAO,CAACS,SAAS,CAAC;IAChBR,IAAI,EAAE;MACJS,cAAc,EAAE,gDAAgD;MAAE;MAClEC,MAAM,EAAE,WAAW,CAAE;IACvB,CAAC;;IACDT,OAAO,EAAE;MACPU,KAAK,EAAE;QACLC,MAAM,EAAE,YAAY;QAAE;QACtBF,MAAM,EAAE,WAAW,CAAE;MACvB;IACF;EACF,CAAC,CAAC;;EAEF,MAAMc,QAAQ,GAAG,MAAMvB,OAAO,CAACwB,GAAG,CAACF,OAAO,CAAC;EAE3C,OAAOC,QAAQ;AACjB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}