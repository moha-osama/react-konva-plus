{"ast":null,"code":"import React from 'react';\nimport { Group } from 'react-konva';\nexport const Portal = ({\n  selector,\n  enabled,\n  children\n}) => {\n  const outer = React.useRef(null);\n  const inner = React.useRef(null);\n  const safeRef = React.useRef();\n  const shouldMove = enabled !== null && enabled !== void 0 ? enabled : true;\n  React.useLayoutEffect(() => {\n    if (!outer.current || !inner.current) {\n      return;\n    }\n    safeRef.current = inner.current;\n    const stage = outer.current.getStage();\n    const newContainer = stage.findOne(selector);\n    if (shouldMove && newContainer) {\n      inner.current.moveTo(newContainer);\n    } else {\n      inner.current.moveTo(outer.current);\n    }\n    const outerLayer = outer.current.getLayer();\n    if (!outerLayer) return;\n    outerLayer.batchDraw();\n    if (newContainer) {\n      const newContainerLayer = newContainer.getLayer();\n      if (!newContainerLayer) return;\n      newContainerLayer.batchDraw();\n    }\n  }, [selector, shouldMove]);\n  React.useEffect(() => {\n    return () => {\n      var _a;\n      (_a = safeRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n    };\n  }, []);\n  return React.createElement(Group, {\n    name: \"_outer_portal\",\n    ref: outer\n  }, React.createElement(Group, {\n    name: \"_inner_portal\",\n    ref: inner\n  }, children));\n};","map":{"version":3,"names":["React","Group","Portal","selector","enabled","children","outer","useRef","inner","safeRef","shouldMove","useLayoutEffect","current","stage","getStage","newContainer","findOne","moveTo","outerLayer","getLayer","batchDraw","newContainerLayer","useEffect","_a","destroy","createElement","name","ref"],"sources":["D:/Work/00-Mogul/konva v2/node_modules/react-konva-utils/es/portal.js"],"sourcesContent":["import React from 'react';\nimport { Group } from 'react-konva';\nexport const Portal = ({ selector, enabled, children }) => {\n    const outer = React.useRef(null);\n    const inner = React.useRef(null);\n    const safeRef = React.useRef();\n    const shouldMove = enabled !== null && enabled !== void 0 ? enabled : true;\n    React.useLayoutEffect(() => {\n        if (!outer.current || !inner.current) {\n            return;\n        }\n        safeRef.current = inner.current;\n        const stage = outer.current.getStage();\n        const newContainer = stage.findOne(selector);\n        if (shouldMove && newContainer) {\n            inner.current.moveTo(newContainer);\n        }\n        else {\n            inner.current.moveTo(outer.current);\n        }\n        const outerLayer = outer.current.getLayer();\n        if (!outerLayer)\n            return;\n        outerLayer.batchDraw();\n        if (newContainer) {\n            const newContainerLayer = newContainer.getLayer();\n            if (!newContainerLayer)\n                return;\n            newContainerLayer.batchDraw();\n        }\n    }, [selector, shouldMove]);\n    React.useEffect(() => {\n        return () => {\n            var _a;\n            (_a = safeRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n        };\n    }, []);\n    return (React.createElement(Group, { name: \"_outer_portal\", ref: outer },\n        React.createElement(Group, { name: \"_inner_portal\", ref: inner }, children)));\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,aAAa;AACnC,OAAO,MAAMC,MAAM,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,OAAO;EAAEC;AAAS,CAAC,KAAK;EACvD,MAAMC,KAAK,GAAGN,KAAK,CAACO,MAAM,CAAC,IAAI,CAAC;EAChC,MAAMC,KAAK,GAAGR,KAAK,CAACO,MAAM,CAAC,IAAI,CAAC;EAChC,MAAME,OAAO,GAAGT,KAAK,CAACO,MAAM,CAAC,CAAC;EAC9B,MAAMG,UAAU,GAAGN,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAGA,OAAO,GAAG,IAAI;EAC1EJ,KAAK,CAACW,eAAe,CAAC,MAAM;IACxB,IAAI,CAACL,KAAK,CAACM,OAAO,IAAI,CAACJ,KAAK,CAACI,OAAO,EAAE;MAClC;IACJ;IACAH,OAAO,CAACG,OAAO,GAAGJ,KAAK,CAACI,OAAO;IAC/B,MAAMC,KAAK,GAAGP,KAAK,CAACM,OAAO,CAACE,QAAQ,CAAC,CAAC;IACtC,MAAMC,YAAY,GAAGF,KAAK,CAACG,OAAO,CAACb,QAAQ,CAAC;IAC5C,IAAIO,UAAU,IAAIK,YAAY,EAAE;MAC5BP,KAAK,CAACI,OAAO,CAACK,MAAM,CAACF,YAAY,CAAC;IACtC,CAAC,MACI;MACDP,KAAK,CAACI,OAAO,CAACK,MAAM,CAACX,KAAK,CAACM,OAAO,CAAC;IACvC;IACA,MAAMM,UAAU,GAAGZ,KAAK,CAACM,OAAO,CAACO,QAAQ,CAAC,CAAC;IAC3C,IAAI,CAACD,UAAU,EACX;IACJA,UAAU,CAACE,SAAS,CAAC,CAAC;IACtB,IAAIL,YAAY,EAAE;MACd,MAAMM,iBAAiB,GAAGN,YAAY,CAACI,QAAQ,CAAC,CAAC;MACjD,IAAI,CAACE,iBAAiB,EAClB;MACJA,iBAAiB,CAACD,SAAS,CAAC,CAAC;IACjC;EACJ,CAAC,EAAE,CAACjB,QAAQ,EAAEO,UAAU,CAAC,CAAC;EAC1BV,KAAK,CAACsB,SAAS,CAAC,MAAM;IAClB,OAAO,MAAM;MACT,IAAIC,EAAE;MACN,CAACA,EAAE,GAAGd,OAAO,CAACG,OAAO,MAAM,IAAI,IAAIW,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACC,OAAO,CAAC,CAAC;IAC5E,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EACN,OAAQxB,KAAK,CAACyB,aAAa,CAACxB,KAAK,EAAE;IAAEyB,IAAI,EAAE,eAAe;IAAEC,GAAG,EAAErB;EAAM,CAAC,EACpEN,KAAK,CAACyB,aAAa,CAACxB,KAAK,EAAE;IAAEyB,IAAI,EAAE,eAAe;IAAEC,GAAG,EAAEnB;EAAM,CAAC,EAAEH,QAAQ,CAAC,CAAC;AACpF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}